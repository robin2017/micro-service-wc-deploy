(function(e){function t(t){for(var s,o,i=t[0],c=t[1],l=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},a={app:0},n=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("85ec"),a=r.n(s);a.a},"11ca":function(e){e.exports=JSON.parse('["localhost:3001","localhost:3002"]')},2712:function(e,t,r){},"28f9":function(e,t,r){e.exports=r.p+"img/u304.89d0542c.svg"},4678:function(e,t,r){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=n(e);return r(t)}function n(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("8bbf"),a=r.n(s),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},o=[],i=(r("034f"),r("2877")),c={},l=Object(i["a"])(c,n,o,!1,null,null,null),u=l.exports,m=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("ul",e._l(e.routes,(function(t,s){return r("li",{directives:[{name:"show",rawName:"v-show",value:t.label,expression:"route.label"}],key:s,on:{click:function(r){return e.routeClick(t)}}},[e._v(e._s(t.label)+" ")])})),0)])},p=[],f={data:function(){return{routes:be}},methods:{routeClick:function(e){console.log(e.path),this.$router.push(e.path)}}},b=f,g=Object(i["a"])(b,d,p,!1,null,null,null),h=g.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.moduleList}},[r("el-table-column",{attrs:{prop:"bizName",label:"业务名称",width:"180"}}),r("el-table-column",{attrs:{prop:"moduleName",label:"信息块名称",width:"120"}}),r("el-table-column",{attrs:{prop:"moduleUrl",label:"信息块资源"}}),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.openUrl(t.row.moduleUrl)}}},[e._v("查看")])]}}])})],1)],1)},j=[],v=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),w=r("2f62");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={computed:N({},Object(w["c"])({moduleList:"moduleList"})),watch:{moduleList:function(e){console.log("moduleList change：",e)}},methods:N({},Object(w["b"])({setModuleList:"setModuleList"}),{openUrl:function(e){console.log(e),window.open(e)}}),mounted:function(){}},z=k,L=Object(i["a"])(z,y,j,!1,null,"740d5a2b",null),_=L.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"template-mgr"},[r("el-card",{staticClass:"box-card left-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("h4",[e._v("信息专题列表")]),r("i",{staticClass:"icon-right el-icon-circle-plus-outline",on:{click:e.addTemplate}})]),r("el-collapse",{model:{value:e.templateBizs,callback:function(t){e.templateBizs=t},expression:"templateBizs"}},e._l(e.templateList,(function(t,s){return r("el-collapse-item",{key:s,attrs:{title:t.bizName,name:s+1}},e._l(t.templates,(function(s,a){return r("div",{key:a,staticClass:"template-item ",class:{"selected-temp":e.selectedItem.bizName===t.bizName&&e.selectedItem.tempName===s.tempName},on:{click:function(r){return e.templateClick(t.bizName,s.tempName)}}},[r("h4",[e._v(e._s(s.tempName))])])})),0)})),1)],1),r("el-card",{staticClass:"box-card middle-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("h4",[e._v("专题预览")]),0===e.previewState?r("label",{staticClass:"icon-right-btn",staticStyle:{"font-size":"12px",color:"lightblue"}},[e._v("请选择左侧一个专题")]):e._e(),1===e.previewState?r("el-button",{staticClass:"icon-right-btn",attrs:{type:"primary"},on:{click:e.previewEditClick}},[e._v("编辑 ")]):e._e(),2===e.previewState?r("el-button",{staticClass:"icon-right-btn",attrs:{type:"primary"},on:{click:e.previewSaveClick}},[e._v("保存 ")]):e._e()],1),r("draggable",{staticClass:"drag-target",class:{"drag-target-no-edit":!e.previewEdit,"drag-target-is-edit":e.previewEdit},attrs:{disabled:!e.previewEdit,group:"modulelItem"},on:{start:e.targetDragStart,add:e.targetAdd,end:e.targetEnd},model:{value:e.targetArray,callback:function(t){e.targetArray=t},expression:"targetArray"}},[r("grid-layout",{attrs:{layout:e.layout,"col-num":12,"row-height":30,"is-draggable":e.previewEdit,"is-resizable":e.previewEdit,"is-mirrored":!1,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(t){e.layout=t}}},e._l(e.layout,(function(t){return r("grid-item",{key:t.i,staticClass:"drag-grid-item",staticStyle:{overflow:"auto"},attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[r(t.compName,{tag:"component"}),r("i",{staticClass:"el-icon-delete",on:{click:function(r){return e.deleteItem(t.i)}}})],1)})),1)],1)],1),r("el-card",{staticClass:"box-card right-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("h4",[e._v("信息块列表")])]),r("el-collapse",{attrs:{accordion:""},model:{value:e.moduleBiz,callback:function(t){e.moduleBiz=t},expression:"moduleBiz"}},e._l(e.moduleGroup,(function(t,s){return r("el-collapse-item",{key:s,attrs:{title:t.bizName,name:s+1}},[r("draggable",{staticClass:"drag-source",attrs:{group:"modulelItem"},on:{start:e.sourceStart,end:function(t){e.drag=!1}},model:{value:e.sourceArrayObject[t.bizName],callback:function(r){e.$set(e.sourceArrayObject,t.bizName,r)},expression:"sourceArrayObject[group.bizName]"}},e._l(e.sourceArrayObject[t.bizName],(function(t){return r("div",{key:t.i,staticClass:"drag-item"},[e._v(" "+e._s(t.content)+" ")])})),0)],1)})),1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.addTemplateVisible,width:"30%"},on:{"update:visible":function(t){e.addTemplateVisible=t}}},[r("el-form",{ref:"tempForm",attrs:{model:e.tempForm,rules:e.tempRule,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"业务名称",prop:"bizName"}},[r("el-input",{model:{value:e.tempForm.bizName,callback:function(t){e.$set(e.tempForm,"bizName",t)},expression:"tempForm.bizName"}})],1),r("el-form-item",{attrs:{label:"专题名称",prop:"tempName"}},[r("el-input",{model:{value:e.tempForm.tempName,callback:function(t){e.$set(e.tempForm,"tempName",t)},expression:"tempForm.tempName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addTemplateVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.formConfirm}},[e._v("确 定")])],1)],1)],1)},C=[],S=(r("7db0"),r("caad"),r("d81d"),r("2532"),r("310e")),P=r.n(S),A=r("7be8"),M=r.n(A);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={name:"templateMgr",data:function(){return{templateBizs:["1"],selectedItem:{bizName:null,tempName:null},moduleBiz:1,sourceArrayObject:{},targetArray:[],layout:[],installedUrl:[],previewState:0,addTemplateVisible:!1,tempForm:{bizName:"",tempName:""},tempRule:{bizName:[{required:!0,message:"请输入业务名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],tempName:[{required:!0,message:"请选择模版名称",trigger:"change"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}]}}},computed:E({previewEdit:function(){return 2===this.previewState}},Object(w["c"])({moduleGroup:"moduleGroup",templateList:"templateList"})),watch:{moduleGroup:function(e){console.log("moduleGroup change:",e)},sourceArray:function(e){console.log("sourceArray:",JSON.stringify(e))},targetArray:function(e){this.addScripts(e),console.log("targetArray:",JSON.stringify(e)),this.layout=e},layout:{deep:!0,handler:function(e){console.log("layout change:",JSON.stringify(e))}},templateList:function(e){console.log("---------templateList  change ------:",e)}},components:{GridLayout:M.a.GridLayout,GridItem:M.a.GridItem,draggable:P.a},methods:{targetAdd:function(e){console.log("00000010:",e)},targetEnd:function(e){console.log("00000200:",e)},targetDragStart:function(e){console.log("0000000:",e)},sourceStart:function(e){console.log("ddddddd:",e)},previewEditClick:function(){this.previewState=2},previewSaveClick:function(){var e=this;this.previewState=1,console.log("保存预览：",JSON.stringify(this.layout)),console.log(this.selectedItem);var t=this.templateList.find((function(t){return t.bizName===e.selectedItem.bizName})).templates.find((function(t){return t.tempName===e.selectedItem.tempName}));t.configs=this.layout},formConfirm:function(){var e=this;this.$refs["tempForm"].validate((function(t){if(console.log("valid:",t),!t)return console.log("error submit!!"),!1;console.log(e.tempForm);var r=e.templateList.find((function(t){return t.bizName===e.tempForm.bizName}));if(r){var s=r.templates.find((function(t){return t.tempName===e.tempForm.tempName}));if(s)return e.$message("已存在该模版，请重新输入!!!"),!1}r?r.templates.push({tempName:e.tempForm.tempName,configs:[]}):(r={bizName:e.tempForm.bizName,templates:[{tempName:e.tempForm.tempName,configs:[]}]},e.templateList.push(r)),e.addTemplateVisible=!1,e.$message({type:"success",message:"保存成功"})}))},addTemplate:function(){for(var e in console.log("添加模版"),this.tempForm)this.tempForm[e]="";this.addTemplateVisible=!0},templateClick:function(e,t){this.selectedItem={bizName:e,tempName:t},console.log("====:",this.selectedItem);var r=this.templateList.find((function(t){return t.bizName===e})).templates.find((function(e){return e.tempName===t})).configs;console.log("=======",r),this.targetArray=r,this.previewState=1},addScripts:function(e){var t=this;console.log("根据列表添加脚本:",e);var r=document.createDocumentFragment(),s=e.map((function(e){if(!t.installedUrl.includes(e.url)){var s=document.createElement("script");s.src=e.url,r.appendChild(s),t.installedUrl.push(e.url)}return e.url}));console.log("资源URL：",s),console.log("代码片段:",r),document.querySelector("#wcMounted").appendChild(r)},deleteItem:function(e){var t=this.targetArray.find((function(t){return t.i===e}));this.targetArray=this.targetArray.filter((function(t){return t.i!==e})),this.sourceArrayObject[t.bizName].push(t)},genSourceArrayObject:function(){for(var e={},t=0,r=0;r<this.moduleGroup.length;r++){for(var s=this.moduleGroup[r],a=[],n=0;n<s.groupList.length;n++){var o=s.groupList[n];t++,a.push({x:0,y:0,w:3,h:2,i:t+"",content:o.moduleName,url:o.moduleUrl,bizName:s.bizName,compName:"ms-wc-"+o.moduleName})}e[s.bizName]=a}console.log("生成结果：",e),this.sourceArrayObject=e}},mounted:function(){console.log("moduleGroup val:",this.moduleGroup),this.genSourceArrayObject(),console.log("templateList=========:",this.templateList)}},T=D,I=(r("6fc3"),r("697b"),Object(i["a"])(T,x,C,!1,null,"9493303e",null)),F=I.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-display"},[r("h4",[e._v("用户页面展示:业务:"+e._s(e.bizName)+",模版:"+e._s(e.tempName))]),0===e.moduleConfigs.length?r("div",{staticStyle:{color:"lightgrey",display:"flex","justify-content":"center"}},[e._v("未配置该模版 ")]):e._e(),r("grid-layout",{attrs:{layout:e.moduleConfigs,"col-num":12,"row-height":30,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(t){e.moduleConfigs=t}}},e._l(e.moduleConfigs,(function(e){return r("grid-item",{key:e.i,staticClass:"drag-grid-item",staticStyle:{overflow:"auto"},attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[r(e.compName,{tag:"component"})],1)})),1)],1)},U=[];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q={name:"UserDisplay",data:function(){return{moduleConfigs:[]}},computed:J({},Object(w["c"])({templateList:"templateList"}),{bizName:function(){return this.$route.query.bizName},tempName:function(){return this.$route.query.tempName}}),components:{GridLayout:M.a.GridLayout,GridItem:M.a.GridItem},methods:{addScripts:function(e){console.log("根据列表添加脚本:",e);var t=new DocumentFragment,r=e.map((function(e){var r=document.createElement("script");return r.src=e.url,t.appendChild(r),e.url}));console.log("资源URL：",r),console.log("代码片段:",t),document.body.appendChild(t)},getConfigByBizTemp:function(e,t){console.log("templateList:",this.templateList);var r=[];try{r=this.templateList.find((function(t){return t.bizName===e})).templates.find((function(e){return e.tempName===t})).configs}catch(s){console.error("没找到模版")}console.log("页面模块配置：",r),this.moduleConfigs=r,this.addScripts(r)}},mounted:function(){console.log("bizName,tempName:",this.bizName,this.tempName),this.getConfigByBizTemp(this.bizName,this.tempName)}},V=q,R=(r("82fc"),Object(i["a"])(V,$,U,!1,null,null,null)),H=R.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-config"},[s("section",{staticClass:"header"},[s("img",{attrs:{src:r("28f9")}}),s("h2",[e._v("联合信息墙管理服务")]),s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,router:"",mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleMenuSelect}},[s("el-menu-item",{attrs:{index:"/moduleMgr"}},[s("i",{staticClass:"el-icon-suitcase"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("信息块管理")])]),s("el-menu-item",{attrs:{index:"/templateMgr"}},[s("i",{staticClass:"el-icon-suitcase-1"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("信息专题管理")])]),s("el-menu-item",{attrs:{index:"/userMgr",disabled:""}},[s("i",{staticClass:"el-icon-user"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户管理")])])],1),e.showPreview?s("i",{staticClass:"el-icon-view user-preview",on:{click:e.showPreviewClick}}):e._e()],1),s("section",{staticClass:"menu-body"},[s("router-view")],1)])},Q=[],W=(r("99af"),r("b0c0"),r("96cf"),r("1da1")),X=(r("d3b7"),{personList:"rest/testController/personList",hello:"rest/testController/hello",serviceList:"rest/testController/serviceList"}),Y=r("bc3a"),Z=r.n(Y);function ee(e){return Z.a.get(e).then((function(e){return e.data}))}r("11ca");var te=r("742c"),re={getServiceList:function(){return ee(X.serviceList)},getTemplateList:function(){return Promise.resolve(te)},getServiceInfo:function(e){var t="http://".concat(e,"/packages_wc/package.json");return ee(t)}};function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne={data:function(){return{activeIndex:"/moduleMgr",showPreview:!1}},computed:ae({},Object(w["c"])({moduleList:"moduleList",templateList:"templateList"})),watch:{activeIndex:function(e){console.log("value:",e)}},methods:ae({},Object(w["b"])({setModuleList:"setModuleList",setModuleGroup:"setModuleGroup",setTemplateList:"setTemplateList"}),{showPreviewClick:function(){this.$router.push({path:"/userDisplay",query:{bizName:"业务一",tempName:"模版一"}})},handleMenuSelect:function(e,t){this.showPreview="/templateMgr"===e,console.log(e,t)},getTemplateList:function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.getTemplateList();case 2:t=e.sent,console.log("模块列表:",t),this.setTemplateList(t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getModuleList:function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,r,s,a,n,o,i,c,l,u,m,d,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.getServiceList();case 2:t=e.sent,console.log("子服务地址为：",t),r=[],s=[],a=[],n=[],o=0;case 9:if(!(o<t.length)){e.next=18;break}return e.next=12,re.getServiceInfo(t[o]).catch((function(e){return console.log("获取子服务信息失败：",e),"error"}));case 12:if(i=e.sent,r.push(i),"string"!==typeof i){for(c=i.name,l=[],u=0;u<i["micro-service-modules"].length;u++)m=i["micro-service-modules"][u].name,d=i["micro-service-modules"][u].version,p=i["micro-service-modules"][u].module,f="http://".concat(t[o],"/packages_wc/").concat(p,"/ms-wc-").concat(m,".js"),s.push({bizName:c,moduleName:m,moduleUrl:f,moduleVersion:d}),l.push({moduleName:m,moduleUrl:f,moduleVersion:d});a.push({bizName:c,groupList:l}),i["micro-service-templates"]&&n.push({bizName:c,url:t[o],list:i["micro-service-templates"]})}case 15:o++,e.next=9;break;case 18:console.log("获取所有的pkgs：",r),console.log("获取所有的moduleList:",s),console.log("获取所有的moduleGroup:",a),this.setModuleList(s),this.setModuleGroup(a),this.addTemplateList(n);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addTemplateList:function(e){for(var t=this,r=this.templateList,s=0;s<e.length;s++)for(var a=e[s],n=function(e){var s=a.list[e],n=r.find((function(e){return e.bizName===s.bizName}));n||(n={bizName:s.bizName,templates:[]},r.push(n));for(var o={tempName:s.templateName,configs:[]},i=function(e){var r=s.configs[e],a=t.moduleList.find((function(e){return e.moduleName===r.content})).moduleUrl,n=ae({},r,{i:888,url:a,bizName:"",compName:"ms-wc-".concat(r.content)});o.configs.push(n)},c=0;c<s.configs.length;c++)i(c);n.templates.push(o)},o=0;o<a.list.length;o++)n(o);this.setTemplateList(r)}}),created:function(){this.getModuleList(),this.getTemplateList()},mounted:function(){this.$router.push({path:this.activeIndex}).catch((function(e){console.log("输出报错：",e)}))}},oe=ne,ie=(r("8c88"),r("d4d1"),Object(i["a"])(oe,K,Q,!1,null,"1b0060c5",null)),ce=ie.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello-world"},[r("div",{staticClass:"part-left"},[r("h3",[e._v("模块列表")]),r("draggable",{staticClass:"drag-source",attrs:{group:"people"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.sourceArray,callback:function(t){e.sourceArray=t},expression:"sourceArray"}},e._l(e.sourceArray,(function(t){return r("div",{key:t.i,staticClass:"drag-item"},[e._v(" "+e._s(t.content)+" ")])})),0)],1),r("div",{staticClass:"part-mid"},[r("h3",[e._v("模版预览")]),r("draggable",{staticClass:"drag-target",attrs:{group:"people"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.targetArray,callback:function(t){e.targetArray=t},expression:"targetArray"}},[r("grid-layout",{attrs:{layout:e.layout,"col-num":12,"row-height":30,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(t){e.layout=t}}},e._l(e.layout,(function(t){return r("grid-item",{key:t.i,staticClass:"drag-grid-item",attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[e._v(" "+e._s(t.content)+" "),r("i",{staticClass:"el-icon-delete",on:{click:function(r){return e.deleteItem(t.i)}}})])})),1)],1)],1),e._m(0)])},ue=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"part-right"},[r("h3",[e._v("模版配置")]),r("pre",{staticClass:"conf-display"},[e._v("[]")])])}],me={data:function(){return{sourceArray:[{x:0,y:0,w:3,h:2,i:"1",content:"模块111"},{x:0,y:0,w:3,h:2,i:"2",content:"模块222"},{x:0,y:0,w:3,h:2,i:"3",content:"模块333"},{x:0,y:0,w:3,h:2,i:"4",content:"模块444"},{x:0,y:0,w:3,h:2,i:"5",content:"模块555"},{x:0,y:0,w:3,h:2,i:"6",content:"模块666"},{x:0,y:0,w:3,h:2,i:"7",content:"模块777"}],targetArray:[],layout:[],showDom:null}},watch:{sourceArray:function(e){console.log("sourceArray:",JSON.stringify(e))},targetArray:function(e){console.log("targetArray:",JSON.stringify(e)),this.layout=e},layout:{deep:!0,handler:function(e){console.log("layout change:",JSON.stringify(e)),this.showDom.innerHTML=JSON.stringify(e,null,2)}}},components:{GridLayout:M.a.GridLayout,GridItem:M.a.GridItem,draggable:P.a},methods:{deleteItem:function(e){var t=this.targetArray.find((function(t){return t.i===e}));this.targetArray=this.targetArray.filter((function(t){return t.i!==e})),this.sourceArray.push(t)}},mounted:function(){this.showDom=document.querySelector(".conf-display")}},de=me,pe=(r("e799"),Object(i["a"])(de,le,ue,!1,null,"d03b15f0",null)),fe=pe.exports;a.a.use(m["a"]);var be=[{path:"/index",name:"Index",redirect:"/userConfig",component:h},{path:"/userDisplay",name:"UserDisplay",component:H,label:"用户展示"},{path:"/test",name:"Test",component:fe,label:"测试页面"},{path:"/",name:"UserConfig",component:ce,label:"用户配置",children:[{path:"moduleMgr",name:"ModuleMgr",component:_,label:"模块管理"},{path:"templateMgr",name:"TemplateMgr",component:F,label:"模版管理"}]}],ge=new m["a"]({routes:be}),he=ge;a.a.use(w["a"]);var ye=new w["a"].Store({state:{moduleList:[],moduleGroup:[],templateList:[]},mutations:{setModuleList:function(e,t){console.log("store-mutations-setModuleList:",t),e.moduleList=t},setModuleGroup:function(e,t){console.log("store-mutations-setModuleGroup:",t),e.moduleGroup=t},setTemplateList:function(e,t){console.log("store-mutations-setTemplateList:",t),e.templateList=t}},actions:{},modules:{}}),je=r("5c96"),ve=r.n(je),we=(r("0fae"),r("f23d"));r("202f");a.a.config.productionTip=!1,a.a.use(ve.a),a.a.use(we["a"]),new a.a({router:he,store:ye,render:function(e){return e(u)}}).$mount("#app")},"5e88":function(e,t,r){},"697b":function(e,t,r){"use strict";var s=r("d950"),a=r.n(s);a.a},"6fc3":function(e,t,r){"use strict";var s=r("2712"),a=r.n(s);a.a},"742c":function(e){e.exports=JSON.parse("[]")},"7a4c":function(e,t,r){},"82fc":function(e,t,r){"use strict";var s=r("ffbd"),a=r.n(s);a.a},"85ec":function(e,t,r){},"8bbf":function(e,t){e.exports=Vue},"8c88":function(e,t,r){"use strict";var s=r("f927"),a=r.n(s);a.a},d4d1:function(e,t,r){"use strict";var s=r("5e88"),a=r.n(s);a.a},d950:function(e,t,r){},e799:function(e,t,r){"use strict";var s=r("7a4c"),a=r.n(s);a.a},f927:function(e,t,r){},ffbd:function(e,t,r){}});
//# sourceMappingURL=app.4120184b.js.map